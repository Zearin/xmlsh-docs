<?xml version="1.0" encoding="UTF-8"?>
<?xml-model type="application/xml"
			href="http://www.oasis-open.org/docbook/xml/5.0/rng/docbookxi.rng" 
?>
<!--
	Skeletal referentry for XMLSH.
	
	@see
		http://www.docbook.org/tdg5/en/html/refentry.html
-->
<refentry	xmlns	= "http://docbook.org/ns/docbook" 
        	xmlns:xi= "http://www.w3.org/2001/XInclude"
        	xmlns:xl= "http://www.w3.org/1999/xlink" 
        	version	= "5.0"
        	
        	remap="command"
	>


	<!--    
		Extended metadata.  
		(Not required, but useful)
		
		@see
			http://www.docbook.org/tdg5/en/html/refmeta.html
	-->
	<refmeta>
		<refentrytitle>
			<command remap="command/@name">xaddattribute</command>
		</refentrytitle>
		
		<manvolnum>1</manvolnum>

		<refmiscinfo>
			<!--
				@see
					http://www.docbook.org/tdg5/en/html/refmiscinfo.html
				
				Meta-information for a reference entry other than the title and 
				volume number.
				
				The refmiscinfo element is an escape hatch for additional 
				meta-information about a reference page. It may hold copyright 
				information, release or revision information, descriptive text 
				for use in a print header or footer, or any other information 
				not explicitly provided for in refmeta.
			-->
		</refmiscinfo>
	</refmeta>
	
	
	
	<!--	
		(Required)  Overall metadata.
		
		@see
			http://www.docbook.org/tdg5/en/html/refnamediv.html
	-->
	<refnamediv>
		<refdescriptor><!--	
			
			A description of the topic of a reference page.
			
			Reference pages (refentrys) are usually identified by a short, 
			succinct topic name, such as the name of a function or command. 
			The refname (or one of the refnames, in the case of a reference 
			page that has several) is generally used as the topic name. 
			When none of the refnames is appropriate, refdescriptor is used 
			to specify the topic name.

			A refdescriptor is unnecessary when an appropriate refname can be 
			selected automatically. At least one refname is required, so 
			refdescriptor cannot be used in place of a name, only in addition 
			to it.
		
		--></refdescriptor>
		
		<refname remap="command/@name">xaddattribute</refname>
		
		<refpurpose remap="command/synopsis">Adds attributes to matching elements.</refpurpose>
		
		<refclass>
			<!--builtin-->
			<!--command-->
			<!--function-->
		</refclass>
	</refnamediv>
	
	
	
	<!--	
		Quick-snyopsis info.  Equivalent to `[command] -usage`.
		
		(Not required by DocBook.  Should be required for XMLSH.)
		
		@see
			http://www.docbook.org/tdg5/en/html/refsynopsisdiv.html
	-->
	<refsynopsisdiv remap="command/usage">
		<cmdsynopsis>
			<command>xaddattribute</command> 
			
			<arg>match-expression</arg><!-- A XSLT style match expression -->
			<arg>attribute-name</arg><!-- Name of attribute to add or replace -->
			<arg>attribute-value</arg><!-- Value of attribute -->
		</cmdsynopsis>
	</refsynopsisdiv>
	
	
	
	<!--	
		Full documentation.
		
		Equivalent to a manpage.
		
		@see
			http://www.docbook.org/tdg5/en/html/refsection.html
	-->
	<refsection>
		<title>Description</title>
		
		<para>
			<command>addattribute</command> is a simple front-end to the <command>xed</command> command which adds (or replaces) a single attribute on all matching nodes. 
			The match-expression is an XSLT 2.0 match expression. 
			For all element nodes matching that expression, an attribute is added (or replaced if it already exists).
		</para>


		<example>
			<title>Add a comment attribute to all file elements produced by <command>xls</command></title>
		
			<programlisting language="shell">xls | xaddattribute file comment "This is a file"</programlisting>
		
			<para>Result (run from <application>xmlsh</application>’s root directory)</para>
		
			<screen xml:space="preserve" language="xml"> 			
&lt;dir&gt;
	&lt;file name="README.txt" path="C:/Work/DEI/xmlsh/trunk/README.txt" comment="This is a file"/&gt;
    &lt;file name="_dist" path="C:/Work/DEI/xmlsh/trunk/_dist" comment="This is a file"/&gt;
	&lt;file name="_out" path="C:/Work/DEI/xmlsh/trunk/_out" comment="This is a file"/&gt;
	&lt;file name="bin" path="C:/Work/DEI/xmlsh/trunk/bin" comment="This is a file"/&gt;
	&lt;file name="build-lib" path="C:/Work/DEI/xmlsh/trunk/build-lib" comment="This is a file"/&gt;
	&lt;file name="build.xml" path="C:/Work/DEI/xmlsh/trunk/build.xml" comment="This is a file"/&gt;
	&lt;file name="doc" path="C:/Work/DEI/xmlsh/trunk/doc" comment="This is a file"/&gt;
	&lt;file name="lib" path="C:/Work/DEI/xmlsh/trunk/lib" comment="This is a file"/&gt;
	&lt;file name="license.txt" path="C:/Work/DEI/xmlsh/trunk/license.txt" comment="This is a file"/&gt;
	&lt;file name="notices" path="C:/Work/DEI/xmlsh/trunk/notices" comment="This is a file"/&gt;
	&lt;file name="play" path="C:/Work/DEI/xmlsh/trunk/play" comment="This is a file"/&gt;
	&lt;file name="samples" path="C:/Work/DEI/xmlsh/trunk/samples" comment="This is a file"/&gt;
	&lt;file name="schemas" path="C:/Work/DEI/xmlsh/trunk/schemas" comment="This is a file"/&gt;
	&lt;file name="src" path="C:/Work/DEI/xmlsh/trunk/src" comment="This is a file"/&gt;
	&lt;file name="test" path="C:/Work/DEI/xmlsh/trunk/test" comment="This is a file"/&gt;
	&lt;file name="unix" path="C:/Work/DEI/xmlsh/trunk/unix" comment="This is a file"/&gt;
	&lt;file name="win32" path="C:/Work/DEI/xmlsh/trunk/win32" comment="This is a file"/&gt;
	&lt;file name="xmlsh.log" path="C:/Work/DEI/xmlsh/trunk/xmlsh.log" comment="This is a file"/&gt;
&lt;/dir&gt;
			</screen>
		</example>


		<refsection>
			<title>Implementation</title>
			
			<para>The <command>xaddattribute</command> command is implemented as a built-in xsh script.</para>
			<programlisting language="shell"> xed -matches "$1" -a &lt;[ attribute { $_2 } { $_3 } ]&gt; </programlisting>
		</refsection>


		<refsection>
			<title>Return Value</title>
			
			<para>Returns <computeroutput>0</computeroutput> if the command executed successfully, <computeroutput>1</computeroutput> if there was an error.</para>
		</refsection>
		
		<refsection>
			<title>See Also</title>
			<para><uri remap="command/@url">http://www.xmlsh.org/CommandXaddattribute</uri></para>
		</refsection>
	</refsection>
	
</refentry>